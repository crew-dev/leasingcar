const calculatorInputMoney=document.querySelector("#money"),calculatorInputInstallment=document.querySelector("#prepaid"),calculatorInputTerm=document.querySelector("#term_contract_input"),allCosts=document.querySelector("#allСosts"),calculatorItem=document.querySelectorAll(".calculator__item"),resultsTextSpan=document.querySelector("#resultsTextSpan"),totalNds=document.querySelector("#TotalNds");console.log(allCosts);for(let t=0;t<calculatorItem.length;t++)calculatorItem[t].addEventListener("click",e=>{for(let t=0;t<calculatorItem.length;t++)calculatorItem[t].classList.remove("calc_item__active"),e.target==calculatorItem[t]&&e.target.classList.add("calc_item__active");switch(e.target){case calculatorItem[0]:case calculatorItem[1]:carprice.value="200000 Р",money.setAttribute("min","200000"),money.value="200000",minCost.textContent="200 000 P",first_installment.value="5%",prepaid.value="5",outcome_term_contract.value="12 месяцев",term_contract_input.value="12",result_sum();break;case calculatorItem[2]:case calculatorItem[3]:case calculatorItem[4]:case calculatorItem[5]:case calculatorItem[6]:case calculatorItem[7]:carprice.value="1000000 Р",money.setAttribute("min","1000000"),money.value="1000000",minCost.textContent="1 000 000 P",first_installment.value="5%",prepaid.value="5",outcome_term_contract.value="12 месяцев",term_contract_input.value="12",result_sum()}});function rz(t){for(str="",s="",st=""+t,toshka=st.indexOf("."),-1==toshka&&(toshka=st.length),n=Math.ceil(toshka/3),i=0;i<n;i++)str+=st.substring(toshka-3*(n-i),toshka-3*(n-i)+3);return str+=s,str}function n_nds(){ncost=Math.round(+calculatorInputMoney.value)}function avans(t){1==t&&(tavans=1,sumavans=Math.round(+calculatorInputInstallment.value*calculatorInputMoney.value)/100,avansrub=sumavans,procavans=+calculatorInputInstallment.value)}function result_sum(){if(avans(1),n_nds(),""==calculatorInputTerm.value)return alert("Пожалуйста, укажите предмет лизинга."),!1;term=+calculatorInputTerm.value,plat_mesiac=(ncost-sumavans)/+calculatorInputTerm.value;var t=new Array(+calculatorInputTerm.value),e=new Array(+calculatorInputTerm.value);mes_proc=4*ncost/100/12;var a=new Array(3);for(i=0;i<+calculatorInputTerm.value;i++)t[i]=14*(ncost-sumavans-plat_mesiac*i)/100/12,e[i]=plat_mesiac+t[i]+mes_proc,last_year=Math.floor(i/12),last_month=i%12,0==last_month&&(a[last_year]=0),a[last_year]+=e[i];poln_plat=0;let l;for(y=0;y<=last_year;y++){for(mmm=y==last_year?last_month:11,m=0;m<=mmm;m++);poln_plat+=Math.round(a[y]/(mmm+1))*(mmm+1),l=rz(Math.round(a[y]/(mmm+1))),console.log(a)}const n=document.querySelector("#monthlyPaymentSpan"),r=document.querySelector("#first_installment"),c=document.querySelector("#carprice"),o=document.querySelector("#outcome_term_contract");document.querySelector(".results__text");const u=document.querySelector("#resultTextList");avans(1),c.value=calculatorInputMoney.value+" P",r.value=calculatorInputInstallment.value+"%",o.value=calculatorInputTerm.value+" месяцев",resultsTextSpan.textContent=Math.round(rz(poln_plat+sumavans))+" ₽";document.querySelector("#nds");n_nds(),totalNds.innerHTML=rz(Math.round(20*(poln_plat+sumavans)/120*100)/100)+" ₽",n.textContent=l+" ₽",allСosts.textContent=Math.round(calculatorInputMoney.value/1.18*1)+" ₽",u.textContent=rz(Math.round(20*(poln_plat+sumavans)/120*100)/100)+" ₽",console.log(u)}n_nds(),avans(1),nnds=ncost=0,tavans=0,sumavans=0,procavans=0,plat_mesiac=0,mes_proc=0,term=0,result_sum();const outcomeFirstInstallment=document.querySelector("#first_installment");calculatorInputInstallment.addEventListener("input",()=>{result_sum()});const outcomeMoney=document.querySelector("#carprice");calculatorInputMoney.addEventListener("input",()=>{result_sum()});const outcomeTermContract=document.querySelector("#outcome_term_contract");calculatorInputTerm.addEventListener("input",()=>{result_sum()});